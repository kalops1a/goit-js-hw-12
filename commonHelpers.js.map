{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function fetchImages(searchQuery, apiKey, page = 1) {\n    const perPage = 40;\n    const url = `https://pixabay.com/api/?key=${apiKey}&q=${searchQuery}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n    try {\n        const response = await axios.get(url);\n        return response.data;\n    } catch (error) {\n        throw new Error(`An error occurred while fetching data: ${error.message}`);\n    }\n}","\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nlet lightbox;\n\n\n\n\nexport function displayImages(images) {\n    const gallery = document.getElementById(\"gallery\");\n\n    images.forEach(image => {\n        const imageLink = document.createElement(\"a\");\n        imageLink.classList.add(\"image-container\");\n        imageLink.href = image.largeImageURL;\n\n        const img = document.createElement(\"img\");\n        img.src = image.webformatURL;\n        img.alt = image.tags;\n\n        const infoContainer = document.createElement(\"div\");\n        infoContainer.classList.add(\"info-container\");\n        infoContainer.innerHTML = `\n            <p class=\"info-item\">Likes: ${image.likes}</p>\n            <p class=\"info-item\">Views: ${image.views}</p>\n            <p class=\"info-item\">Comments: ${image.comments}</p>\n            <p class=\"info-item\">Downloads: ${image.downloads}</p>\n        `;\n\n        imageLink.appendChild(img);\n        imageLink.appendChild(infoContainer);\n        gallery.appendChild(imageLink);\n    });\n\n    const options = {\n        captionsData: \"alt\",\n        closeText: \"\",\n        navText: [\"←\", \"→\"],\n        docClose: true,\n        history: false,\n        elementClass: \"simple-lightbox\",\n        overlay: true,\n        spinner: true,\n        spinnerHtml: \"<div class='slb-spinner'></div>\",\n        closeButton: true,\n        closeButtonHtml: \"<span class='slb-close-button'></span>\",\n        loop: false,\n        bindToItems: true,\n        disableRightClick: true,\n        enableZoom: false,\n        beforeOpen: () => { document.body.style.overflow = \"hidden\"; },\n        afterClose: () => { document.body.style.overflow = \"\"; }\n    };\n\n    if (!lightbox) {\n        lightbox = new SimpleLightbox(\"#gallery a\", options);\n    } else {\n        lightbox.refresh();\n    }\n}","import iziToast from \"izitoast\";\nimport { fetchImages } from \"./js/pixabay-api\";\nimport { displayImages } from \"./js/render-functions\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nlet searchQuery = '';\nlet currentPage = 1;\nconst apiKey = \"43152327-599555690163c4dbf744e6761\";\n\nconst loadMoreBtn = document.getElementById(\"loadMoreBtn\");\nconst loader = document.getElementById(\"loader\");\nconst gallery = document.getElementById(\"gallery\");\n\nloadMoreBtn.style.display = \"none\";\n\n \n\n    \nloadMoreBtn.addEventListener(\"click\", async () => {\n    try {\n        const data = await fetchImages(searchQuery, apiKey, ++currentPage);\n        if (data.hits.length === 0) {\n            loadMoreBtn.style.display = \"none\";\n            iziToast.info({\n                title: \"Info\",\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: \"topCenter\"\n            });\n        } else {\n            displayImages(data.hits);\n            smoothScrollBy(getGalleryCardHeight() * 2);\n        }\n    } catch (error) {\n        console.error(error);\n    }\n});\n\ndocument.getElementById(\"searchForm\").addEventListener(\"submit\", async evt => {\n    evt.preventDefault();\ngallery.innerHTML = \"\";\n    loader.style.display = \"block\";\n    \n\n    searchQuery = document.getElementById(\"searchInput\").value.trim();\n    \n    if (searchQuery === \"\") {\n        loader.style.display = \"none\";\n        gallery.innerHTML = \"\";\n        iziToast.error({\n            title: \"Alert\",\n            message: \"Please enter a value.\",\n            position: \"topCenter\"\n        });\n        return;\n    }\n\n   \n\n    try {\n        currentPage = 1;\n        const data = await fetchImages(searchQuery, apiKey, currentPage);\n        if (data.hits.length === 0) {\n            loader.style.display = \"none\";\n            iziToast.info({\n                title: \"Info\",\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                position: \"topCenter\"\n            });\n            loadMoreBtn.style.display = \"none\";\n        } else {\n            loader.style.display = \"none\";\n            displayImages(data.hits);\n            if (data.totalHits <= currentPage * 15) {\n                loadMoreBtn.style.display = \"none\";\n                iziToast.info({\n                    title: \"Info\",\n                    message: \"We're sorry, but you've reached the end of search results.\",\n                    position: \"topCenter\"\n                });\n            } else {\n                loadMoreBtn.style.display = \"block\";\n            }\n            smoothScrollBy(getGalleryCardHeight() * 2);\n        }\n    } catch (error) {\n        loader.style.display = \"none\";\n        gallery.innerHTML = \"\";\n        iziToast.error({\n            title: \"Error\",\n            message: error.message,\n            position: \"topCenter\"\n        });\n    }\n});\n\nfunction getGalleryCardHeight() {\n    const firstGalleryCard = gallery.querySelector(\".image-container\");\n    const cardHeight = firstGalleryCard.getBoundingClientRect().height;\n    return cardHeight;\n}\n\nfunction smoothScrollBy(distance, duration = 500) {\n    const initialY = window.scrollY;\n    const targetY = initialY + distance;\n    const startTime = performance.now();\n\n    function step() {\n        const normalizedTime = (performance.now() - startTime) / duration;\n        if (normalizedTime < 1) {\n            window.scrollTo(0, initialY + distance * normalizedTime);\n            requestAnimationFrame(step);\n        } else {\n            window.scrollTo(0, targetY);\n        }\n    }\n\n    requestAnimationFrame(step);\n}"],"names":["fetchImages","searchQuery","apiKey","page","url","axios","error","lightbox","displayImages","images","gallery","image","imageLink","img","infoContainer","options","SimpleLightbox","currentPage","loadMoreBtn","loader","data","iziToast","smoothScrollBy","getGalleryCardHeight","evt","distance","duration","initialY","targetY","startTime","step","normalizedTime"],"mappings":"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"}